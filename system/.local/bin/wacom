#! /bin/bash

#device="Wacom Intuos4 4x6"
device="PenTablet"
stylus="$device Pen stylus"
#eraser="$device Pen eraser"
#cursor="$device Pen cursor"
pad="$device Pad pad"

DEFAULT_OUTPUT=$(xrandr | awk '$3 ~ /primary/ {print $1}')

STATUS=/tmp/wacomtoggle

if [ ! -e $STATUS ]; then
    touch $STATUS
    xsetwacom --set "$stylus" MapToOutput "$DEFAULT_OUTPUT"
    #xsetwacom --set "$eraser" MapToOutput "$DEFAULT_OUTPUT"
    #xsetwacom --set "$cursor" MapToOutput "$DEFAULT_OUTPUT"
    xsetwacom --set "$pad" MapToOutput "$DEFAULT_OUTPUT"
else
    rm $STATUS
    screen=$(xrandr | grep " connected " | awk '{print $1}' | grep -v "$DEFAULT_OUTPUT")
    xsetwacom --set "$stylus" MapToOutput "$screen"
    #xsetwacom --set "$eraser" MapToOutput "$screen"
    #xsetwacom --set "$cursor" MapToOutput "$screen"
    xsetwacom --set "$pad" MapToOutput "$screen"
fi

xsetwacom set "$pad" Button 1 "key ctrl F6"
xsetwacom set "$pad" Button 2 "key +alt"
xsetwacom set "$pad" Button 3 "key +ctrl"
xsetwacom set "$pad" Button 8 "key +shift"
xsetwacom set "$pad" Button 9 "key shift +"
xsetwacom set "$pad" Button 10 "key key -"
xsetwacom set "$pad" Button 11 "key ctrl z"
xsetwacom set "$pad" Button 12 "key ctrl shift z"
